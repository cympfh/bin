#!/usr/bin/env coffee

process.stdout.on('error',process.exit);
{exec} = require 'child_process'

exec "curl -s #{process.argv[2]}", (err, out) ->
  throw err if err
  ls = out.split '\n'
  for line in ls
    if line.indexOf('var movie_url') isnt -1
      eval line
    if line.indexOf('var ary_spare_sources') isnt -1
      eval line
  console.log decodeURIComponent movie_url
  for i in [0...ary_spare_sources.spare.length]
    console.log decodeURIComponent ary_spare_sources.spare[i].src

